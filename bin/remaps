#!/bin/sh

MS=$1

[[ -z "$MS" ]] && MS='1/4'

# This script is called on startup to remap keys.
# Increase key speed via a rate change
xset r rate 300 50
# Map the caps lock key to super...
setxkbmap -option caps:super
# But when it is pressed only once, treat it as escape.
killall xcape 2>/dev/null ; xcape -e 'Super_L=Escape'
# Map the menu button to right super as well.
xmodmap -e 'keycode 135 = Super_R'
# Turn off the caps lock if on since there is no longer a key for it.
xset -q | grep "Caps Lock:\s*on" && xdotool key Caps_Lock

# Trackball
HUGEID=$(xinput list | grep "HUGE" | head -n 1 | sed -r 's/.*id=([0-9]+).*/\1/')
# hold Middle button to scroll
xinput --set-prop ${HUGEID} "libinput Button Scrolling Button" 12
# Set Mouse Speeds
xinput --set-prop ${HUGEID} "Coordinate Transformation Matrix" $MS 0 0 0 $MS 0 0 0 $MS
